---
# Configure Windows Firewall for vLLM API access
# Allows inbound connections on port 8000 for vLLM containers

- name: Configure Windows Firewall for vLLM
  hosts: windows_workstations
  gather_facts: false
  vars:
    ansible_password: >-
      {{ lookup('env', 'WINTERMUTE_ANSIBLE_PASSWORD') if inventory_hostname == 'wintermute'
         else lookup('env', 'ARMITAGE_ANSIBLE_PASSWORD') }}
  
  tasks:
    - name: Allow vLLM API port 8000 inbound
      win_firewall_rule:
        name: vLLM API Port 8000
        localport: 8000
        protocol: tcp
        direction: in
        action: allow
        state: present
        enabled: true

