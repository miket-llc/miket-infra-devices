---
# Windows group variables for Ansible WinRM configuration
# These settings prevent timeouts during long-running operations
#
# NOTE: WinRM timeout settings (read_timeout, operation_timeout, connection_timeout)
# are configured in ansible.cfg under [winrm] section, not here as inventory variables.
# The pywinrm library doesn't support these as ansible_winrm_* inventory variables.

# Connection retry settings
# Note: ansible_winrm_connection_timeout is supported and can be set here if needed
# but it's already configured in ansible.cfg [winrm] section

# Performance optimizations
ansible_winrm_scheme: http              # Use HTTP (port 5985) over Tailscale
ansible_winrm_transport: ntlm           # NTLM authentication
ansible_winrm_server_cert_validation: ignore  # Ignore cert validation (Tailscale handles security)

# Task execution timeouts
ansible_command_timeout: 600            # Maximum time for command execution (10 minutes)
ansible_task_timeout: 600               # Maximum time for task execution (10 minutes)

# WinRM passwords - source of truth is Azure Key Vault
# Sourced from environment variables (set via /etc/ansible/windows-automation.env)
# Run: set -a; source /etc/ansible/windows-automation.env; set +a
ansible_password: >-
  {{ lookup('env', (inventory_hostname | upper) + '_ANSIBLE_PASSWORD') }}
