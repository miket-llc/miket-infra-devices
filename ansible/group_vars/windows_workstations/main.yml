---
# Shared configuration for Windows workstations with Docker Desktop
# Applies to: armitage, wintermute, and future Windows workstations with Docker

# User configuration
# All Windows workstations use the 'mdt' local user account
# No Microsoft account integration for automation
automation_user: mdt
automation_user_home: "C:\\Users\\mdt"

# Docker Desktop configuration
docker_desktop:
  enabled: true
  backend: wsl2
  credential_store: ""  # Disable credential helper (prevents auth issues)
  config_path: "{{ automation_user_home }}\\.docker"
  
# vLLM configuration defaults
vllm_defaults:
  image: "vllm/vllm-openai:latest"
  port: 8000
  container_name: "vllm-{{ inventory_hostname }}"
  scripts_path: "{{ automation_user_home }}\\dev\\{{ inventory_hostname }}\\scripts"
  config_path: "C:\\ProgramData\\{{ inventory_hostname | capitalize }}Mode"
  auto_switch: true
  check_interval_minutes: 5
  idle_threshold_minutes: 5
  restart_policy: "unless-stopped"
  shm_size: "4g"

# PowerShell script deployment
powershell_scripts_dest: "{{ automation_user_home }}\\dev\\{{ inventory_hostname }}\\scripts"
powershell_execution_policy: RemoteSigned

# Remote Desktop configuration (consistent across Windows workstations)
rdp_config:
  enabled: true
  port: 3389
  nla_enabled: true
  restrict_to_tailscale: true
  firewall_subnet: "100.64.0.0/10"  # Tailscale subnet
  # All administrators automatically get RDP access

# Scheduled task configuration
scheduled_task_user: SYSTEM
scheduled_task_run_level: highest

# WSL2 configuration
wsl2:
  enabled: true
  default_distro: Ubuntu
  nvidia_toolkit_required: true

# Common Windows roles
# These are already defined in host_vars, but listed here for reference
# roles:
#   - windows-workstation
#   - gaming-mode
#   - cuda-development
#   - docker-desktop



