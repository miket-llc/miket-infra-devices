# Copyright (c) 2025 MikeT LLC. All rights reserved.

---
# Podman Standard Linux Role Defaults
# Configures Podman as the ONLY container runtime on all Linux hosts
# NO Docker CLI compatibility - use native Podman commands
# Supports: Fedora, Ubuntu, Debian, and other major distributions
#
# POLICY: Docker is BANNED from all PHC systems
#   - No podman-docker package
#   - No docker CLI wrappers
#   - No Docker Desktop
#   - Scripts must use podman/podman-compose commands directly

# Podman packages to install (Fedora/RHEL/CentOS)
podman_packages:
  - podman
  - podman-compose
  - buildah
  - skopeo

# Podman packages to install (Ubuntu/Debian)
podman_packages_debian:
  - podman
  - buildah
  - skopeo
  - python3-pip  # For podman-compose via pip

# Docker CLI compatibility DISABLED - use native Podman commands
# This was previously enabled but introduces confusion and technical debt
podman_install_docker_compat: false

# Install cockpit-podman for web UI (optional)
podman_install_cockpit: false

# Configure registries (unqualified search)
podman_registries_search:
  - docker.io
  - quay.io
  - ghcr.io

# User for rootless podman (typically the primary user)
podman_user: mdt

# Enable lingering for rootless containers (keep running after logout)
podman_enable_linger: true

# Enable podman socket for API access
podman_enable_socket: true

# Storage configuration
podman_storage_driver: overlay

# Custom storage paths (override to use secondary drive)
# Leave empty to use defaults (/var/lib/containers for root, ~/.local/share/containers for rootless)
podman_graphroot: ""           # Container image/layer storage (e.g., /space/containers/engine/podman)
podman_runroot: ""             # Runtime data (e.g., /run/containers/storage)

# Configure storage.conf when custom paths are set
podman_configure_storage: true

# NVIDIA Container Toolkit integration
podman_nvidia_enabled: true

# Create graphroot directory structure
podman_create_storage_dirs: true






