# Netdata Cloud Configuration
# Managed by Ansible - Do not edit manually
# {{ ansible_managed }}
#
# Architecture: Single Agent + Netdata Cloud (Homelab)
# Host: {{ inventory_hostname }}
# Generated: {{ ansible_date_time.iso8601 | default('unknown') }}
#
# =============================================================================
# NETDATA CLOUD: ENABLED (Homelab Subscription)
# =============================================================================
#
# This agent is claimed to Netdata Cloud (Homelab Space).
# Cloud provides:
#   - Unified dashboard for all PHC nodes
#   - Long-term metric retention
#   - Alerting and notifications
#   - Cross-node correlation and analysis
#
# Local dashboard remains available via tailnet for break-glass debugging.
#
# Claiming is done via netdata-claim.sh with tokens from Azure Key Vault.
# The agent connects to Cloud via ACLK (Agent-Cloud Link).
#
# =============================================================================

[global]
    # Cloud connectivity is ENABLED
    enabled = {{ 'yes' if netdata_cloud_enabled else 'no' }}
    
    # Cloud base URL (default Netdata Cloud)
    cloud base url = https://app.netdata.cloud

# =============================================================================
# ACLK (Agent-Cloud Link)
# =============================================================================
# ACLK is the secure connection between this agent and Netdata Cloud.
# It uses MQTT over TLS for real-time metric streaming.
#
# The agent must be claimed to Cloud for ACLK to be active.
# Claiming is idempotent - re-running the claim script on an already-claimed
# agent simply verifies the connection.
#
# To verify ACLK status:
#   netdatacli aclk-state
#
# To reclaim (if needed):
#   netdata-claim.sh -token=<claim-token> -rooms=<room-id> -url=https://app.netdata.cloud
#
# =============================================================================
