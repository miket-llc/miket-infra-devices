# Copyright (c) 2025 MikeT LLC. All rights reserved.
# Managed by Ansible - do not edit directly

[Unit]
Description=Nextcloud PostgreSQL Database Backup
Documentation=https://github.com/miket-llc/miket-infra/docs/architecture/components/DATA_ESTATE_SPEC.md
After=podman.socket nextcloud.service
Requires=podman.socket
OnFailure=failure-notify@%n.service

[Service]
Type=oneshot
ExecStart={{ nextcloud_bin_path }}/nextcloud-db-backup.sh

# Credentials passed via script loading env file directly
# (safer handling of special characters in passwords)

# User context
User=root
Group=root

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=nextcloud-db-backup

# Timeout
TimeoutStartSec=600

[Install]
WantedBy=multi-user.target

