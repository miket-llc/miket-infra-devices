# Copyright (c) 2025 MikeT LLC. All rights reserved.

---
# Shared defaults for Windows vLLM deployments
# These values are overridden by host_vars for each machine

# vLLM configuration (referencing host_vars structure)
vllm_model: "{{ vllm.model | default('mistralai/Mistral-7B-Instruct-v0.2') }}"
vllm_served_model_name: "{{ vllm.served_model_name | default(None) }}"
vllm_port: "{{ vllm.port | default(8000) }}"
vllm_container_name: "{{ vllm.container_name | default('vllm-' + inventory_hostname) }}"
vllm_image: "{{ vllm.image | default('vllm/vllm-openai:latest') }}"
vllm_max_model_len: "{{ vllm.max_model_len | default(8192) }}"
vllm_max_num_seqs: "{{ vllm.max_num_seqs | default(1) }}"
vllm_gpu_memory_utilization: "{{ vllm.gpu_memory_utilization | default(0.85) }}"
vllm_quantization: "{{ vllm.quantization | default(None) }}"
vllm_tensor_parallel_size: "{{ vllm.tensor_parallel_size | default(1) }}"
vllm_dtype: "{{ vllm.dtype | default(None) }}"
vllm_kv_cache_dtype: "{{ vllm.kv_cache_dtype | default(None) }}"

# Auto-switching configuration
auto_switch_enabled: "{{ vllm.auto_switch | default(true) }}"
check_interval_minutes: "{{ vllm.check_interval_minutes | default(5) }}"
idle_threshold_minutes: "{{ vllm.idle_threshold_minutes | default(5) }}"

# Deployment paths (use group_vars defaults if available)
scripts_dest: "{{ vllm_defaults.scripts_path | default('C:\\Users\\mdt\\dev\\' + inventory_hostname + '\\scripts') }}"
config_dest: "{{ vllm_defaults.config_path | default('C:\\ProgramData\\' + (inventory_hostname | capitalize) + 'Mode') }}"
vllm_config_dir: "{{ config_dest }}"

