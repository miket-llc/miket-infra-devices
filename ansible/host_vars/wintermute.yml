---
# Hardware and OS profile for the wintermute workstation
# Desktop workstation with high-end GPU for development and gaming
hardware:
  vendor: "Desktop"
  model: "Custom Build"
  cpu:
    model: "Intel Core i9"  # TODO: Update with actual CPU model
    cores: 16  # TODO: Update with actual core count
    threads: 24  # TODO: Update with actual thread count
  gpu:
    vendor: "NVIDIA"
    model: "GeForce RTX 4070 Super"
    vram_gb: 12
    driver_version: "latest"
    cuda_capable: true
  memory_gb: 32  # TODO: Update with actual memory amount
  storage:
    - type: "NVMe SSD"
      size_gb: 1000  # TODO: Update with actual storage size
network:
  interfaces:
    - name: "Ethernet"
      type: "ethernet"
      mac_address: "{{ vault_wintermute_eth_mac | default('REDACTED') }}"
    - name: "Wi-Fi"
      type: "wifi"
      mac_address: "{{ vault_wintermute_wifi_mac | default('REDACTED') }}"
  tailscale:
    enabled: true
    hostname: "wintermute"
os:
  name: "Windows"
  version: "11"
  edition: "Pro"
  build: "22H2"
roles:
  - windows-workstation
  - gaming-mode
  - cuda-development
  - docker-desktop

# Remote desktop configuration
remote_protocol: rdp
remote_port: 3389
restrict_to_tailscale: true

# vLLM Configuration
vllm:
  enabled: true
  model: "casperhansen/llama-3-8b-instruct-awq"
  served_model_name: "llama31-8b-wintermute"
  port: 8000
  container_name: "vllm-wintermute"
  image: "vllm/vllm-openai:latest"
  max_model_len: 9000
  gpu_memory_utilization: 0.88
  quantization: "awq"
  tensor_parallel_size: 1
  auto_switch: true
  check_interval_minutes: 5
  idle_threshold_minutes: 5

# Note: Windows hosts don't use become/sudo
# If Wintermute were Linux, these settings would enable passwordless sudo via 1Password
# ansible_become: true
# ansible_become_method: sudo
# ansible_become_password: "{{ lookup('env', 'ANSIBLE_BECOME_PASS') | default(lookup('community.general.onepassword', 'op://Automation/wintermute/sudo', errors='ignore') | default(lookup('pipe', 'op read op://Automation/wintermute/sudo 2>/dev/null || echo'), true), true) | default('', true) }}"

