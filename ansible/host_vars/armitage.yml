# Copyright (c) 2025 MikeT LLC. All rights reserved.

---
# Hardware and OS profile for the armitage workstation
# Alienware laptop with high-end GPU for mobile development and gaming

# WinRM credentials sourced from Azure Key Vault (see inventory/hosts.yml)
# Note: Do NOT override ansible_password here - it's set in inventory via AKV lookup

hardware:
  vendor: "Alienware"
  model: "Gaming Laptop"
  cpu:
    model: "Intel Core i9-13900HX"  # High-end mobile CPU typical for Alienware
    cores: 24
    threads: 32
  gpu:
    vendor: "NVIDIA"
    model: "GeForce RTX 4070"
    vram_gb: 8
    driver_version: "latest"
    cuda_capable: true
  memory_gb: 16
  storage:
    - type: "NVMe SSD"
      size_gb: 2048
network:
  interfaces:
    - name: "Wi-Fi"
      type: "wifi"
      mac_address: "{{ vault_armitage_wifi_mac | default('REDACTED') }}"
    - name: "Ethernet"
      type: "ethernet"
      mac_address: "{{ vault_armitage_eth_mac | default('REDACTED') }}"
  tailscale:
    enabled: true
    hostname: "armitage"
os:
  name: "Windows"
  version: "11"
  edition: "Pro"
  build: "22H2"
device_roles:
  - windows-workstation
  - gaming-mode
  - cuda-development
  - podman-desktop

# Remote desktop configuration
# NoMachine is the standardized remote access protocol (RDP retired 2025-11-22)
remote_protocol: nomachine
remote_port: 4000
restrict_to_tailscale: true

# NoMachine settings
nomachine_version: "9.2.18"
nomachine_port: 4000

# vLLM Configuration
vllm:
  enabled: true
  model: "Qwen/Qwen2.5-7B-Instruct-AWQ"
  served_model_name: "qwen2.5-7b-armitage"
  port: 8000
  container_name: "vllm-armitage"
  image: "vllm/vllm-openai:latest"
  quantization: "awq"
  max_model_len: 8192
  max_num_seqs: 1
  gpu_memory_utilization: 0.90
  kv_cache_dtype: "fp8"
  tensor_parallel_size: 1
  auto_switch: true
  check_interval_minutes: 5
  idle_threshold_minutes: 5

# AI Fabric Role Assignment (aligns with miket-infra platform contract)
# This node serves: chat-fast (default, low-latency chat)
ai_node_roles:
  - chat-fast

# ========================================
# Netdata Monitoring Configuration
# ========================================
# armitage is a Netdata CHILD node
# Streams metrics to motoko parent
netdata_role: child

# Tailscale IP will be auto-detected during deployment
# netdata_tailscale_ip: 100.x.x.x

# Cloud connectivity DISABLED (self-hosted only)
netdata_cloud_enabled: false
