# Copyright (c) 2025 MikeT LLC. All rights reserved.

# Infrastructure Device Inventory
# Last Updated: 2025-11-06

devices:
  resilience_nodes:
    atom:
      hostname: atom
      fqdn: atom.pangolin-vega.ts.net
      os: Fedora 43 Workstation
      codename: workstation
      type: Resilience Node
      hardware:
        model: Lenovo ThinkPad X1 Carbon (2012)
        cpu: Intel Core i7-3667U
        gpu: Intel HD Graphics 4000
        memory_gb: 8
        storage_gb: 224
        battery: true
      services:
        - prometheus-node-exporter
        - tailscaled
        - firewalld
      power_policy:
        lid_close: ignore
        idle_action: ignore
        critical_battery_action: shutdown
        critical_battery_percent: 2
        low_battery_warning: 5
        masked_targets:
          - sleep.target
          - suspend.target
          - hibernate.target
          - hybrid-sleep.target
      network:
        tailscale_ip: 100.120.122.13
        ssh_enabled: true
        ssh_auth: tailscale
      selinux:
        mode: enforcing
        sshd_t: permissive  # Technical debt for Tailscale SSH
      notes: |
        Resilience node - battery-backed device that stays alive during power failures.
        Purpose: Network presence proof, SSH foothold for recovery, alert origin.
        Design: Minimal services, boring and bulletproof.
        NOT a container host. NOT for heavy workloads.
        
  servers:
    motoko:
      hostname: motoko
      fqdn: motoko.pangolin-vega.ts.net
      os: Fedora 43 Workstation
      codename: workstation
      type: Server
      hardware:
        model: Alienware Laptop
        gpu: NVIDIA GeForce RTX 2080
        gpu_driver: 535.230.02
        cuda_version: "12.2"
      services:
        - podman  # Docker BANNED - purged 2025-12-03
        - litellm
        - vllm-embeddings
        - nextcloud
        - samba
        - netatalk
        - fail2ban
        - postfix
      storage:
        podman_root: /podman/storage
        backup_location: /space
        model_storage: /podman/apps/vllm/cache
      network:
        ssh_enabled: true
        ssh_auth: key_only
        tailscale: enabled
      terminal: WarpTerminal
      notes: |
        Primary infrastructure server
        Hosts Podman containers with NVIDIA CDI runtime
        Provides backup services via Samba/AFP
        Docker completely purged 2025-12-03

    akira:
      hostname: akira
      fqdn: akira.pangolin-vega.ts.net
      os: Fedora 43 Workstation
      codename: workstation
      type: AI/Dev Workstation
      hardware:
        model: Custom Desktop (Strix Point)
        cpu: AMD Ryzen (Strix Point APU)
        gpu: AMD Radeon 890M (RDNA 3.5 iGPU)
        gpu_arch: gfx1150
        gpu_driver: ROCm 7.1
        memory_gb: 128
        unified_memory_gb: 62
        storage_tb: 2
      services:
        - podman
        - tailscaled
        - firewalld
        - llama-server
      storage:
        flux_mount: /mnt/flux
        model_storage: /mnt/flux/ai/models
        space_mount: /mnt/space  # NFS from motoko
      network:
        ssh_enabled: true
        ssh_auth: key_only
        tailscale: enabled
        tailscale_tags:
          - tag:linux
          - tag:ai-node
          - tag:workstation
          - tag:rocm
      terminal: WarpTerminal
      ai_capabilities:
        runtime: ROCm
        inference_engine: llama-cpp-python
        max_model_params: 72B
        verified_speeds:
          qwen3_30b_a3b_moe: 20 tok/s
          qwen3_coder_30b_a3b: 19 tok/s
          qwen2.5_72b: 1.3 tok/s
      notes: |
        Strix Point APU AI/Dev workstation
        128GB unified memory (62GB accessible to GPU)
        ROCm 7.1 with gfx1150 support
        Verified: 72B parameter models on integrated GPU
        MoE models run at ~20 tok/s
        Bootstrap completed: 2025-12-05
        
  workstations:
    wintermute:
      hostname: wintermute
      os: Windows 11
      type: Workstation
      hardware:
        gpu: NVIDIA GeForce RTX 4070 Super
      network:
        tailscale: enabled
      notes: Primary development workstation
      
    armitage:
      hostname: armitage
      fqdn: armitage.pangolin-vega.ts.net
      os: Fedora 43 KDE
      type: Laptop Workstation
      hardware:
        model: Alienware m16 R2
        cpu: Intel Core i9-13900HX
        gpu: NVIDIA GeForce RTX 4070 Max-Q
        gpu_driver: "580.119.02"
        memory_gb: 16
        storage_tb: 2
      network:
        tailscale_ip: 100.88.153.51
        tailscale: enabled
        tailscale_ssh: enabled
        tailscale_tags:
          - tag:linux
          - tag:gaming
          - tag:workstation
        remote_desktop: nomachine
        wake_on_lan: enabled
      selinux:
        mode: enforcing
        tailscale_ssh_policy: installed  # Custom policy module for Tailscale SSH
      services:
        - Podman
        - NVIDIA CUDA Toolkit
        - Ollama
        - KDE Plasma
      notes: |
        High-performance Alienware m16 R2 laptop
        Rebuilt from Fedora 43 GNOME to KDE (2025-12-20)
        Mobile development, gaming, and LLM workstation
        SELinux enforcing with custom Tailscale SSH policy
      
  macos:
    count-zero:
      hostname: count-zero
      os: macOS
      type: MacBook Pro
      owner: personal
      network:
        tailscale: enabled
        ssh_enabled: true
      terminal: WarpTerminal
      notes: Personal development laptop with custom configuration
      
    managed-macbook:
      hostname: IT-managed
      os: macOS
      type: MacBook Pro
      owner: corporate
      managed_by: IT
      notes: Corporate managed device